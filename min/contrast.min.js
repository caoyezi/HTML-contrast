!function(){function t(){i.style.width=c.width+"px",i.style.height=o.height+"px"}function e(t,e,a){t?(g.style.opacity=1,g.style.webkitTransform="scale(1)",g.style.left=e+"px",g.style.top=a+"px"):(g.style.left="-100px",g.style.top="-100px",g.style.opacity=.4,g.style.webkitTransform="scale(0)")}var a=document.body.clientWidth||document.documentElement.clientWidth,n=document.body.clientHeight||document.documentElement.clientHeight,o={setBg:function(t){var e=new Image;e.src=t,e.onload=function(){o.width=a,o.height=e.height*a/e.width,i.style.height=o.height+"px"},s.style.backgroundImage="url("+t+")"},width:0,height:0};window.Contrast=o;var c={opacity:1,width:a/2,opacity_height:140},i=document.createElement("div"),s=document.createElement("div");document.body.appendChild(i);var d=document.createElement("span"),l=document.createElement("div"),r=document.createElement("span"),p=document.createElement("span"),m=document.createElement("span");i.appendChild(s).className="contrast-bg",i.appendChild(d).className="contrast-percentage",i.appendChild(l).className="contrast-tip",l.appendChild(r).className="contrast-design",r.innerText="左侧为设计稿",l.appendChild(p).className="contrast-drag",p.innerText="横向滑动，调整设计稿宽度",l.appendChild(m).className="contrast-range",m.innerText="底部横向滑动，调整设计稿透明度",i.className="contrast-box",t();var h,u,y,v=!1,b=!1;document.addEventListener("touchstart",function(t){toolbarOption.compare.acitve&&(h=t.touches[0].clientX,y=t.touches[0].clientY,n-t.touches[0].clientY<c.opacity_height?(v=!0,d.style.opacity=1):b=!0)},!0),document.addEventListener("touchmove",function(t){Math.abs(t.touches[0].clientX-h)/Math.abs(t.touches[0].clientY-y)>1&&(t.preventDefault(),t.stopPropagation()),toolbarOption.compare.active&&(u=t.touches[0].clientX-h,h=t.touches[0].clientX,v?(c.opacity+=u/a,c.opacity>1?c.opacity=1:c.opacity<0&&(c.opacity=0),d.innerText="设计稿透明度:"+parseInt(100*c.opacity)+"%",s.style.opacity=c.opacity):b&&(i.className="contrast-box active",c.width+=u,c.width>a?c.width=a:c.width<0&&(c.width=0),i.style.width=c.width+"px"))},!0),document.addEventListener("touchend",function(){v=!1,b=!1,setTimeout(function(){v||(d.style.opacity=0)},1400),setTimeout(function(){b||(i.className="contrast-box")},600)});var w=document.createElement("link");w.rel="stylesheet",w.href="contrast.css",document.head.appendChild(w);var g=document.createElement("div"),f=document.createElement("span");toolbarOption={compare:{active:!1}},document.body.appendChild(g).className="contrast-toolbar",g.appendChild(f).className="contrast-compare";var E=0;document.body.addEventListener("touchstart",function(t){Date.now()-E<320?e(!0,t.touches[0].clientX-100,t.touches[0].clientY-50):e(!1),E=Date.now()},!0),f.addEventListener("touchstart",function(){toolbarOption.compare.acitve=!toolbarOption.compare.acitve,toolbarOption.compare.acitve?(f.className="contrast-compare active",i.style.display="block",toolbarOption.compare.active=!0,setTimeout(function(){l.parentNode.removeChild(l)},1e4)):(f.className="contrast-compare",i.style.display="none",toolbarOption.compare.active=!1)},!0)}(window);