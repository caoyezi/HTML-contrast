!function(){function t(t,o){if(n[o])for(var e in n[o])window.isDebug&&(t.className=o),t.style[e]=n[o][e]}function o(){d.style.width=r.width+"px",d.style.height=c.height+"px"}var e=document.createElement("style");e.type="text/css",e.innerHTML="@-webkit-keyframes contrast-an-show{0%{opacity:0}20%{opacity:1}80%{opacity:1}100%{opacity:0}}",document.head.appendChild(e);var n={"contrast-bg":{width:"100%",height:"100%",backgroundSize:"7.5rem auto",backgroundRepeat:"no-repeat",backgroundPosition:"left top"},"contrast-tip":{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",zIndex:"10000",color:"#000",fontSize:".4rem"},"contrast-design":{position:"absolute",top:"0",left:"0",bottom:"0",paddingTop:"30px",display:"webkitBox",webkitBoxAlign:"center",webkitBoxPack:"center",right:"50%",textAlign:"center",backgroundColor:"rgba(255, 191, 0, .65)",webkitAnimation:"contrast-an-show 3s linear .1s both"},"contrast-drag":{position:"absolute",left:"0",top:"30%",right:"0",textAlign:"center",textShadow:"#FC0 0 0 8px",opacity:"0",webkitAnimation:"contrast-an-show 3s linear 3.4s both"},"contrast-range":{position:"fixed",bottom:"0",height:"140px",left:"0",right:"0",display:"-webkit-box",webkitBoxAlign:"center",webkitBoxPack:"center",backgroundColor:"rgba(255, 191, 0, .65)",opacity:"0",webkitAnimation:"contrast-an-show 3s linear 6.8s both"},"contrast-percentage":{position:"absolute",top:"50%",left:"0",minWidth:"100%",textAlign:"center",backgroundColor:"yellow",webkitTransition:"opacity .2s ease-in",whiteSpace:"nowrap",fontSize:".3rem"},"contrast-box":{zIndex:"10001",position:"absolute",display:"none",left:"0",top:"0",boxShadow:"rgba(0, 0, 0, .2) 0 0 2px",webkitTransition:"box-shadow .3s ease-in"},"contrast-box-inactive":{boxShadow:"rgba(0, 0, 0, .2) 0 0 2px"},"contrast-box-active":{boxShadow:"rgb(0, 0, 0) 0 0 4px"},"contrast-toolbar":{boxShadow:"#BBB 0 2px 8px",borderRadius:"50%",overflow:"hidden",position:"fixed",height:".8rem",lineHeight:".8rem",display:"-webkit-box",webkitBoxAlign:"center",overflow:"hidden",zIndex:"100002"},"contrast-toolbar-span":{backgroundColor:"rgba(0, 0, 0, .4)"},"contrast-toolbar-span-active":{backgroundColor:"rgba(33, 150, 243, 1)"},"contrast-compare":{display:"block",backgroundColor:"rgba(0, 0, 0, .4)",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAAAMFBMVEUAAAD///////////////////////////////////////////////////////////87TQQwAAAAD3RSTlMAQMDwYKAwIBA/0J+AsHC6bjOZAAAA5UlEQVRIx+3VMQ6CQBAF0AkxVhZyAjkFLRyBzlIvYKys1dIjcANKOo/BETyCAZaYaDHGJbvLLrOuiRQU/HLyipnmDwycS5p+ByvE8YJdhCIAHvLUV5CZIRqAJ5ZgT4OHBDcaNBJENKglQA3MfZ47IgnUyROYwN+g+AwXdsD40MutIGkBs4EKWoBLC8gECGlQbwV4nkhQggAYkCBW4EWBBhTAmABBF5R9oBbz+MI9EEIXYNYDSx1UJmCgA8wNkJiA6aACE2ChAaqjhgTuGty4ivToqGJ3mcOBegfrkf2sn8HZ92HwvAEaVf3gbViUKQAAAABJRU5ErkJggg==')",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:".6rem",width:".8rem",height:".8rem"}},i=document.body.clientWidth||document.documentElement.clientWidth,a=document.body.clientHeight||document.documentElement.clientHeight,c={setBg:function(t){var o=new Image;o.src=t,o.onload=function(){c.width=i,c.height=o.height*i/o.width,d.style.height=c.height+"px"},s.style.backgroundImage="url("+t+")"},width:0,height:0};window.Contrast=c;var r={opacity:1,width:i/2,opacity_height:140},d=document.createElement("div"),s=document.createElement("div");document.body.appendChild(d);var p=document.createElement("span"),l=document.createElement("div"),h=document.createElement("span"),b=document.createElement("span"),u=document.createElement("span");d.appendChild(s),t(s,"contrast-bg"),d.appendChild(p),t(p,"contrast-percentage"),d.appendChild(l),t(l,"contrast-tip"),l.appendChild(h),t(h,"contrast-design"),h.innerText="左侧为设计稿",l.appendChild(b),t(b,"contrast-drag"),b.innerText="横向滑动，调整设计稿宽度",l.appendChild(u),t(u,"contrast-range"),u.innerText="底部横向滑动，调整设计稿透明度",t(d,"contrast-box"),o();var g,m,A,y=!1,w=!1;document.addEventListener("touchstart",function(t){toolbarOption.compare.active&&(g=t.touches[0].clientX,A=t.touches[0].clientY,a-t.touches[0].clientY<r.opacity_height?(y=!0,p.style.opacity=1):w=!0)},!0),document.addEventListener("touchmove",function(o){Math.abs(o.touches[0].clientX-g)/Math.abs(o.touches[0].clientY-A)>1&&(o.preventDefault(),o.stopPropagation()),toolbarOption.compare.active&&(m=o.touches[0].clientX-g,g=o.touches[0].clientX,y?(r.opacity+=m/i,r.opacity>1?r.opacity=1:r.opacity<0&&(r.opacity=0),p.innerText="设计稿透明度:"+parseInt(100*r.opacity)+"%",s.style.opacity=r.opacity):w&&(t(d,"contrast-box-active"),r.width+=m,r.width>i?r.width=i:r.width<0&&(r.width=0),d.style.width=r.width+"px"))},!0),document.addEventListener("touchend",function(){y=!1,w=!1,setTimeout(function(){y||(p.style.opacity=0)},1400),setTimeout(function(){w||t(d,"contrast-box-inactive")},600)});var x=document.createElement("div"),v=document.createElement("span");toolbarOption={x:60,y:100,moving:!1,hasTouched:!1,compare:{active:!1}},document.body.appendChild(x),x.style.bottom=toolbarOption.y+"px",x.style.right=toolbarOption.x+"px",t(x,"contrast-toolbar"),x.appendChild(v),t(v,"contrast-compare");var k,f;x.addEventListener("touchstart",function(){k=event.touches[0].clientX,f=event.touches[0].clientY,toolbarOption.hasTouched=!0},!0),document.addEventListener("touchmove",function(t){toolbarOption.hasTouched&&(toolbarOption.moving=!0,toolbarOption.x-=t.touches[0].clientX-k,toolbarOption.y-=t.touches[0].clientY-f,x.style.bottom=toolbarOption.y+"px",x.style.right=toolbarOption.x+"px",k=t.touches[0].clientX,f=t.touches[0].clientY,t.preventDefault(),t.stopPropagation())},!0),document.addEventListener("touchend",function(){toolbarOption.hasTouched&&(toolbarOption.hasTouched=!1),toolbarOption.moving=!1}),v.addEventListener("touchend",function(){toolbarOption.moving||(toolbarOption.compare.active=!toolbarOption.compare.active,toolbarOption.compare.active?(t(v,"contrast-toolbar-span-active"),d.style.display="block",l&&setTimeout(function(){l.parentNode.removeChild(l),l=null},1e4)):(t(v,"contrast-toolbar-span"),d.style.display="none"))},!0)}();